# SQL
## 演習問題1 (商品を購入したときに必要なテーブルを作成。)
- 商品をみかん5とりんご10を購入した場合、何も考えずに1テーブルと1レコードで表示する以下になります。


    |注文番号|商品名A|値段A|購入数A|商品名B|値段B|購入数B|合計金額(税込)|
    |---|---|---|---|---|---|---|---|
    |1| みかん|100|5|りんご|200|10|2750|

    </br>別商品を買えば買うほど列にカラムが追加されます。
    </br>別商品をどんだけ買うかはお客様次第なので、それを予測して1テーブルにカラムを買うことは不可能です。
    </br>似たような重複コードをなくす、必要な情報に必要なカラムを整理することを正規化と言います。
    <br>以下で正規化を勉強
 　 </br>url:https://oss-db.jp/dojo/dojo_info_04
    </br>リレーショナルデータベースの考え方も必要なので以下を読んでください
    </br>url:https://proglearn.com/2020/08/13/%E3%80%901%E5%AF%BE%E5%A4%9A%EF%BC%9F%E3%80%91%E4%BB%8A%E6%9B%B4%E8%81%B4%E3%81%91%E3%81%AA%E3%81%84%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%81%AE%E3%83%AA%E3%83%AC%E3%83%BC%E3%82
    </br>youtubeでいろんな方が説明されてますので色々とググってみてください。

    </br>商品を扱うテーブルと注文書を扱うテーブルで分けましょう

### 商品のテーブルを作成してください<br>
    Create文は以下を参考に学んでください<br>
    url:https://www.javadrive.jp/mysql/table/index1.html <br>
    
- 商品の扱うデータのイメージ
  商品のデータを扱うイメージ以下になります。
    |id|商品名|値段|
    |---|---|---|
    |1|みかん|100|
    |2|リンゴ|200|


- テーブル名はproductsで以下の内容で作成 <br>
    |論理名|物理名|型|備考|
    |---|---|---|---|
    | id |  id  |  int | 主キーを設定<br>AUTO_INCREMENTで自動採番してください |
    |名前| 商品名|  varchar(50)  | not null で　null値を入れないように設定 |
    |価格(税抜)| price | int |-|
    |税率| tax | int |-|
    
    
### 注文テーブルを作成してください<br>
- 注文を扱うデータのイメージ
  注文のデータを扱うイメージ以下になります。
    |id(注文番号)|商品ID|数量|商品ID|数量|合計金額|
    |---|---|---|---|---|---|
    |1|1|5|2|10|10|2750|
    
    </br>※ただしこれだと似たようなカラムが複数ある為
　　</br>さらに注文のテーブルの他に注文明細テーブルを作ります。

- 注文を扱うデータのイメージ

    |id(注文番号)|合計金額(税抜)|合計金額(税込)
    |---|---|---|
    |1|2500|2750|

- 注文明細を扱うデータのイメージ

    |id(注文の明細番号)|注文番号|商品のID|数量|金額|
    |---|---|---|---|---|
    |1|1|1|5|500|
    |2|1|2|10|2000|

<br>イメージがついてから作成してください

- 注文テーブル名をordersで以下の内容で作成<br>

    |論理名|物理名|型|備考|
    |---|---|---|---|
    | 注文番号 |  id  |  int | 主キーを設定<br>AUTO_INCREMENTで自動採番 |
    |合計金額| sum_price|  int  | not null で　null値を入れないよう |
    |合計金額(税抜)| tax_sum_prce | int | not null で　null値を入れないように設定|

- 注文明細テーブル名をorder_detailsで以下の内容で作成<br>

    |論理名|物理名|型|備考|
    |---|---|---|---|
    |注文明細番号|  id  |  int | 主キーを設定<br>AUTO_INCREMENTで自動採番|
    |注文番号|order_id | int | 外部キーの設定|
    |商品ID|product_id | int | 外部キーの設定|
    |数量|amount | int | not null で　null値を入れないように設定 |
    |金額|price | int | not null で　null値を入れないように設定 |

